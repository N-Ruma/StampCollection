{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'leaflet/leaflet.css' %}">
<style>
  #map { height: 90vh; width: 100%; }
  .header { display:flex; justify-content:space-between; align-items:center; padding:10px; }
  .icons img { width:30px; margin-left:10px; cursor:pointer; }
</style>
{% endblock head %}

{% block title %}
<div class="header">
  <h2>全体マップ</h2>
  <div class="icons">
    <a href="{% url 'home' %}"><img src="{% static 'icons/home.png' %}"></a>
    <a href="{% url 'map_view' %}"><img src="{% static 'icons/map.png' %}"></a>
    <a href="{% url 'stamp_list' %}"><img src="{% static 'icons/stamp.png' %}"></a>
    <a href="#"><img src="{% static 'icons/user.png' %}"></a>
  </div>
</div>
{% endblock title %}

{% block content %}
<div id="map"></div>
{% endblock content %}

{% block script %}
<script src="{% static 'leaflet/leaflet.js' %}"></script>
<script>
// マップ作成
let map = L.map('map').setView([42.316, 140.99], 13);

// タイル
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// スタンプのピンを追加
{% for s in stamps %}
    L.marker([{{ s.latitude }}, {{ s.longitude }}]).addTo(map)
      .bindPopup("<b>{{ s.name }}</b>");
{% endfor %}
</script>
{% endblock script %}